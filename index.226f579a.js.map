{"mappings":"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","sources":["src/js/getPopularNews.js"],"sourcesContent":["import cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport getNewsBySearch from \"./getNewsBySearch\";\nimport {headerRefs} from \"./headerRefs\";\nimport smoothScroll from \"./smoothScroll\";\n\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\nconst URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=${apiKey}`;\nconst smallPagBtns = document.getElementById('small-paginator-btns');\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t\tpopularArticles.perPage = 8;\n\t  return;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t\tpopularArticles.perPage = 7;\n\t  return;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t\tpopularArticles.perPage  = 4;\n\t  return;\n\t} \n\n}\n\n\n\nconst popularArticles = {\n\tbody:[],\n\tfirstNews: 0,\n\tlastNews: 0,\n\tperPage: 0,\n\tpage: 1,\n\tindexOfActivePage: 0,\n\t\n\t\n\tgetPages() {\n\t\treturn Math.ceil(this.body.length / this.perPage);\n\t},\n\tinitOrderNews() {\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\t},\n\tcutToLimitOrder() {\n\t\tthis.page = this.getPages();\n\t\tthis.lastNews = this.body.length;\n\t\tthis.firstNews = this.body.length - this.perPage;\n\t},\n\tresetLimitOrder() {\n\t\tthis.page = 1;\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\n\t},\n\tincreasePage() {\n\t\tthis.page += 1;\n\t\tthis.indexOfActivePage += 1;\n\t},\n\tdecreasePage() {\n\t\tthis.page -= 1;\n\t\tthis.indexOfActivePage -= 1;\n\t},\n\tincreaseStep(){\n\t\tthis.firstNews += this.perPage;\n\t\tthis.lastNews += this.perPage;\n\t},\n\tdecreaseStep(){\n\t\tthis.firstNews -= this.perPage;\n\t\tthis.lastNews -= this.perPage;\n\t},\n\taddToBody(value) {\n\t\tthis.body = [...value];\n\t},\n\tsliceBody() {\n\t\treturn this.body.slice(this.firstNews,this.lastNews);\n\t},\n\tgetIndexOfActivePage() {\n\t\treturn this.indexOfActivePage;\n\t},\n\t\n};\nupadatePerPage();\npopularArticles.initOrderNews();\n\n\ngetNewsBySearch(URL)\n\t.then((response) => {\n\t\tconst allPopularArticles = response.results;\n\t\tpopularArticles.addToBody(allPopularArticles);\n\t}).then(() => {\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.getIndexOfActivePage()].classList.add('isActivePage');\n\t\t\tinitWeather();\n\t});\n\theaderRefs.nextArrow.addEventListener('click',onNextArrow);\n\theaderRefs.backArrow.addEventListener('click',onBackArrow);\n\tsmallPagBtns.addEventListener('click',onPagBtn);\n\n// getMostPopularArticles().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tconsole.log(ulEl);\n// \tulEl.insertAdjacentHTML('beforeend', cardMarkup(res));\n// })\n\nfunction onPagBtn(event) {\n\tif(event.target.id === 'small-pag-btn') {\n\t\tpopularArticles.page = event.target.value;\n\t\tpopularArticles.indexOfActivePage = popularArticles.page - 1;\n\t\tpopularArticles.firstNews = popularArticles.indexOfActivePage * popularArticles.perPage;\n\t\tpopularArticles.lastNews = \tpopularArticles.firstNews + popularArticles.perPage;\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.page - 1].classList.add('isActivePage');\n\t\tsmoothScroll();\n\t\tinitWeather();\n\t}\n\tif(Number(event.target.value) === 1) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\treturn;\n\t} else {\n\t\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t}\n\tif(Number(event.target.value) === popularArticles.getPages()) {\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t\treturn;\n\t} else {\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t}\n\n}\nfunction onNextArrow() {\n\tif(popularArticles.firstNews === 0) {\n\t\tpopularArticles.resetLimitOrder();\n\t}\n\tif(popularArticles.page <= popularArticles.getPages()) {\n\t\tpopularArticles.increaseStep();\n\t\tpopularArticles.increasePage();\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].classList.add('isActivePage');\n\t\tinitWeather();\n\t\n\t\t} else if(popularArticles.page > popularArticles.getPages()) {\n\t\tpopularArticles.cutToLimitOrder();\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tif(Number(document.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].value) === popularArticles.getPages() ) {\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tsmoothScroll();\n}\n\nfunction onBackArrow() {\n\tif(popularArticles.page > 0) {\n\t\tpopularArticles.decreasePage();\n\t\tpopularArticles.decreaseStep();\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].classList.add('isActivePage');\n\t\tinitWeather();\n\t\t} \n\tif(popularArticles.page === 0 || popularArticles.firstNews === 0 ) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t}\n\tif(popularArticles.firstNews < 0) {\n\t\tpopularArticles.firstNews = 0;\n\t}\n\tsmoothScroll();\n}\n\nfunction normalizedPopularNews(articles) {\nconst outputArticles = [];\narticles.map(({ title, url, published_date, abstract, section, id, media }) => { \n\n\t\n\tconst img = media.length > 0 \n\t? media[0]['media-metadata'][2].url\n\t: 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n\n\tconst article = {\n\theadline: title,\n\tweb_url: url, \n\t  pub_date: published_date,\n\t  lead_paragraph: abstract,\n\t  news_desk: section, \n\t  bigSquareImg: img,\n\t  id: id\n\t};\n\toutputArticles.push(article);\n} ); \ncreateBtnsForSmallPaginator();\nreturn outputArticles;\n}\n\n\n\n\n\nfunction createMarkupBtnsForSmallPaginator() {\n\tlet markupBtns = '';\n\n\tfor ( let i = 1; i <= popularArticles.getPages(); i += 1) {\n\t\tmarkupBtns += `<li><button type=\"button\" class=\"buttons\" value=\"${i}\" id=\"small-pag-btn\">${i}</button><li>`;\n\t}\n\treturn markupBtns;\n\t\n}\n\nfunction createBtnsForSmallPaginator() {\n\tsmallPagBtns.innerHTML = createMarkupBtnsForSmallPaginator(); \n\t\n}\n\n\n\n\n"],"names":["$eVqJU","parcelRequire","$1969fc547029a942$var$smallPagBtns","document","getElementById","$1969fc547029a942$var$popularArticles","body","firstNews","lastNews","perPage","page","indexOfActivePage","getPages","Math","ceil","this","length","initOrderNews","cutToLimitOrder","resetLimitOrder","increasePage","decreasePage","increaseStep","decreaseStep","addToBody","value","sliceBody","slice","getIndexOfActivePage","$1969fc547029a942$var$normalizedPopularNews","articles","outputArticles","map","title","url","published_date","abstract","section","id","media","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","push","innerHTML","markupBtns","i","$1969fc547029a942$var$createMarkupBtnsForSmallPaginator","mediaQueryDesktop","window","matchMedia","mediaQueryTablet","mediaQueryMobile","matches","$1969fc547029a942$var$upadatePerPage","$3lSCO","default","then","response","allPopularArticles","results","$6W1HG","headerRefs","list","replaceChildren","querySelectorAll","classList","add","$bkgkh","initWeather","nextArrow","addEventListener","backArrow","removeAttribute","setAttribute","Number","$2cKMc","event","target"],"version":3,"file":"index.226f579a.js.map"}