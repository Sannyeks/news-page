{"mappings":"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","sources":["src/js/localstorage.js","src/js/cardMarkupFavPage.js","src/js/favorite.js"],"sourcesContent":["export function loadItems(kw) {\r\n  let items = [];\r\n\r\n  if (kw in localStorage && localStorage[kw] !== null) {\r\n    items = JSON.parse(localStorage[kw])\r\n  }\r\n\r\n  return items;\r\n};\r\n\r\nexport function saveItems(kw, items) {\r\n  localStorage[kw] = JSON.stringify(items);\r\n};\r\n\r\nexport function addItem(kw, item) {\r\n  const items = loadItems(kw);\r\n  items.push(item)\r\n  saveItems(kw, items);\r\n};\r\n\r\nexport function removeItem(kw, predicat) {\r\n  const items = loadItems(kw).filter(item => !predicat(item))\r\n  saveItems(kw, items)\r\n};\r\n\r\nexport function hasItem(kw, predicat) {\r\n  const items = loadItems(kw);\r\n  return items.some(predicat);\r\n};","import { hasItem, addItem, removeItem } from './localstorage';\nconst FAVORITE_KEY = 'favorite-key';\nconst READ_KEY = 'read-key';\n\nfunction formatDate(dt) {\n  return dt.toLocaleDateString('en-GB');\n}\n\nexport default function cardMarkupFavPage(items) {\n  if ('response' in items && 'docs' in items.response) {\n    items = items.response.docs;\n  }\n\n  items = items || [];\n\n  const markup = items.map(item => {\n    const {\n      headline,\n      web_url,\n      pub_date,\n      lead_paragraph,\n      news_desk,\n      bigMobileImg,\n      smallMobileImg,\n      smallSquareImg,\n      bigSquareImg,\n    } = item;\n    const lenght =\n      lead_paragraph.length > 80\n        ? lead_paragraph.slice(0, 80) + '...'\n        : lead_paragraph;\n\n    const isFav = hasItem(FAVORITE_KEY, item => item.web_url == web_url);\n    const isReaded = hasItem(READ_KEY, item => item.web_url == web_url);\n\n    const pub_date_fmt = formatDate(new Date(pub_date));\n    const img = !bigSquareImg\n      ? 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg'\n      : bigSquareImg;\n\n    const cardItem = document.createElement('li');\n    cardItem.classList.add('card__item');\n    cardItem.innerHTML = `<div class=\"card__wrapper\">\n    <div>\n      <div class=\"card-image__wrapper\">\n        <img\n          class=\"card__image\"\n          src=${img}\n          alt=\"news\"\n          width=\"288\"\n          height=\"395\"\n          loading='lazy'\n        />\n        <span class=\"card-jobsearching\"> ${news_desk} </span>\n        <span class=\"card-already__read ${\n          isReaded ? '' : 'is-hidden'\n        }\">Already read</span>\n        <button class=\"card__btn btn-add ${\n          isFav ? 'is-hidden' : ''\n        }\" type=\"button\" \n        data-url=\"${web_url}\">Add to favorite</button>\n        <button class=\"card__btn btn-remove ${\n          isFav ? '' : 'is-hidden'\n        }\" type=\"button\" data-url=\"${web_url}\">Remove from favorite</button>\n      </div>\n\n      <div class=\"card__text\">\n      <h2 class=\"card__title\">${headline}</h2>\n      <p class=\"card__article\">${lenght}</p>\n      </div>\n      </div>\n\n      <div class=\"card__info\">\n        <span class=\"card__info--date\">${pub_date_fmt}</span>\n        <a class=\"card__info--readmore\" href=\"${web_url}\" target=\"_blank\">\n          Read more\n        </a>\n      </div>\n    </div>`;\n\n    const btnAddToFavorite = cardItem.querySelector('button.card__btn.btn-add');\n    const btnRemoveFromFavorite = cardItem.querySelector(\n      'button.card__btn.btn-remove'\n    );\n    const labelAlreadyRead = cardItem.querySelector('.card-already__read');\n    const lnkReadMore = cardItem.querySelector('a.card__info--readmore');\n\n    btnAddToFavorite.addEventListener('click', () => {\n      addItem(FAVORITE_KEY, item);\n      btnAddToFavorite.classList.add('is-hidden');\n      btnRemoveFromFavorite.classList.remove('is-hidden');\n    });\n\n    btnRemoveFromFavorite.addEventListener('click', () => {\n      removeItem(FAVORITE_KEY, ({ web_url: url }) => web_url === url);\n      btnRemoveFromFavorite.classList.add('is-hidden');\n      btnAddToFavorite.classList.remove('is-hidden');\n    });\n\n    lnkReadMore.addEventListener('click', () => {\n      removeItem(READ_KEY, ({ web_url: url }) => web_url === url);\n      item.readDate = formatDate(new Date());\n      addItem(READ_KEY, item);\n      labelAlreadyRead.classList.remove('is-hidden');\n    });\n\n    return cardItem;\n  });\n\n  const cardItemsFragment = document.createDocumentFragment();\n  markup.forEach(card => cardItemsFragment.appendChild(card));\n\n  return cardItemsFragment;\n}\n","\r\nimport cardMarkupFavPage from './cardMarkupFavPage';\r\nconst favoriteContainer = document.querySelector('.favorite-container');\r\nconst favoriteNotFound = document.querySelector('.favorite-not-found');\r\n\r\nconst FAVORITE_KEY = 'favorite-key';\r\n\r\nconst favoriteNews = localStorage.getItem(FAVORITE_KEY);\r\nlet parseFavoriteNews = JSON.parse(favoriteNews);\r\n\r\nfavoriteContainer.replaceChildren(cardMarkupFavPage(parseFavoriteNews));\r\n\r\nfavoriteContainer.addEventListener('click', removeFromFavorite);\r\nfunction removeFromFavorite(event) {\r\n  console.log(event.target.dataset.url);\r\n  let currentFavorite = event.target.dataset.url;\r\n  parseFavoriteNews.map(favoriteCard => {\r\n    if (favoriteCard.web_url === currentFavorite) {\r\n      const favoriteCardIndex = parseFavoriteNews.indexOf(favoriteCard);\r\n\r\n      parseFavoriteNews.splice(favoriteCardIndex, 1);\r\n      localStorage.setItem(FAVORITE_KEY, JSON.stringify(parseFavoriteNews));\r\n      favoriteContainer.replaceChildren(cardMarkupFavPage(parseFavoriteNews));\r\n    }\r\n  });\r\n}\r\n\r\nfunction favoriteNotFoundShow() {\r\n//   console.log(parseFavoriteNews === []);\r\n  if (parseFavoriteNews.length === 0) {\r\n    favoriteContainer.style.display = 'none';\r\n    favoriteNotFound.style.display = 'flex';\r\n    favoriteNotFound\r\n      .querySelector('.underfined')\r\n      .classList.remove('underfined-hidden');\r\n  }\r\n}\r\n\r\nfavoriteNotFoundShow();\r\n\r\n\r\n"],"names":["$89a4baeedb6cdec9$export$996a78610b7c5ab0","kw","items","localStorage","JSON","parse","$89a4baeedb6cdec9$export$a737821c523fb430","stringify","$89a4baeedb6cdec9$export$fb9705de59d96855","item","push","$89a4baeedb6cdec9$export$fe2d9b4e03920b4c","predicat","filter","$89a4baeedb6cdec9$export$5d8958bbf054854f","some","$02dfa934bfa7945e$var$formatDate","dt","toLocaleDateString","$02dfa934bfa7945e$export$2e2bcd8739ae039","response","docs","markup","map","item1","headline","web_url","pub_date","lead_paragraph","news_desk","bigMobileImg","smallMobileImg","smallSquareImg","bigSquareImg","lenght","length","slice","isFav","isReaded","pub_date_fmt","Date","img","cardItem","document","createElement","classList","add","innerHTML","btnAddToFavorite","querySelector","btnRemoveFromFavorite","labelAlreadyRead","lnkReadMore","addEventListener","remove","url","readDate","cardItemsFragment","createDocumentFragment","forEach","card","appendChild","$f2b37c882cc80f12$var$favoriteContainer","$f2b37c882cc80f12$var$favoriteNotFound","$f2b37c882cc80f12$var$favoriteNews","getItem","$f2b37c882cc80f12$var$parseFavoriteNews","replaceChildren","event","console","log","target","dataset","currentFavorite","favoriteCard","favoriteCardIndex","indexOf","splice","setItem","style","display"],"version":3,"file":"favorite.90171594.js.map"}