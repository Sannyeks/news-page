{"mappings":"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","sources":["src/js/getPopularNews.js"],"sourcesContent":["import cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport getNewsBySearch from \"./getNewsBySearch\";\nimport {headerRefs} from \"./headerRefs\";\nimport smoothScroll from \"./smoothScroll\";\n\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\nconst URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=${apiKey}`;\nconst smallPagBtns = document.getElementById('small-paginator-btns');\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t\tpopularArticles.perPage = 8;\n\t  return;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t\tpopularArticles.perPage = 7;\n\t  return;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t\tpopularArticles.perPage  = 4;\n\t  return;\n\t} \n\n}\n\n\n\nconst popularArticles = {\n\tbody:[],\n\tfirstNews: 0,\n\tlastNews: 0,\n\tperPage: 0,\n\tpage: 1,\n\tindexOfActivePage: 0,\n\t\n\t\n\tgetPages() {\n\t\treturn Math.ceil(this.body.length / this.perPage);\n\t},\n\tinitOrderNews() {\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\t},\n\tcutToLimitOrder() {\n\t\tthis.page = this.getPages();\n\t\tthis.lastNews = this.body.length;\n\t\tthis.firstNews = this.body.length - this.perPage;\n\t},\n\tresetLimitOrder() {\n\t\tthis.page = 1;\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\n\t},\n\tincreasePage() {\n\t\tthis.page += 1;\n\t\tthis.indexOfActivePage += 1;\n\t},\n\tdecreasePage() {\n\t\tthis.page -= 1;\n\t\tthis.indexOfActivePage -= 1;\n\t},\n\tincreaseStep(){\n\t\tthis.firstNews += this.perPage;\n\t\tthis.lastNews += this.perPage;\n\t},\n\tdecreaseStep(){\n\t\tthis.firstNews -= this.perPage;\n\t\tthis.lastNews -= this.perPage;\n\t},\n\taddToBody(value) {\n\t\tthis.body = [...value];\n\t},\n\tsliceBody() {\n\t\treturn this.body.slice(this.firstNews,this.lastNews);\n\t},\n\tgetIndexOfActivePage() {\n\t\treturn this.indexOfActivePage;\n\t},\n\t\n};\nupadatePerPage();\npopularArticles.initOrderNews();\n\n\ngetNewsBySearch(URL)\n\t.then((response) => {\n\t\tconst allPopularArticles = response.results;\n\t\tpopularArticles.addToBody(allPopularArticles);\n\t}).then(() => {\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.getIndexOfActivePage()].classList.add('isActivePage');\n\t\t\tinitWeather();\n\t});\n\theaderRefs.nextArrow.addEventListener('click',onNextArrow);\n\theaderRefs.backArrow.addEventListener('click',onBackArrow);\n\tsmallPagBtns.addEventListener('click',onPagBtn);\n\n// getMostPopularArticles().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tconsole.log(ulEl);\n// \tulEl.insertAdjacentHTML('beforeend', cardMarkup(res));\n// })\n\nfunction onPagBtn(event) {\n\tif(event.target.id === 'small-pag-btn') {\n\t\tpopularArticles.page = event.target.value;\n\t\tpopularArticles.indexOfActivePage = popularArticles.page - 1;\n\t\tpopularArticles.firstNews = popularArticles.indexOfActivePage * popularArticles.perPage;\n\t\tpopularArticles.lastNews = \tpopularArticles.firstNews + popularArticles.perPage;\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.page - 1].classList.add('isActivePage');\n\t\tsmoothScroll();\n\t\tinitWeather();\n\t}\n\tif(Number(event.target.value) === 1) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\treturn;\n\t} else {\n\t\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t}\n\tif(Number(event.target.value) === popularArticles.getPages()) {\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t\treturn;\n\t} else {\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t}\n\n}\nfunction onNextArrow() {\n\tif(popularArticles.firstNews === 0) {\n\t\tpopularArticles.resetLimitOrder();\n\t}\n\tif(popularArticles.page <= popularArticles.getPages()) {\n\t\tpopularArticles.increaseStep();\n\t\tpopularArticles.increasePage();\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].classList.add('isActivePage');\n\t\tinitWeather();\n\t\n\t\t} else if(popularArticles.page > popularArticles.getPages()) {\n\t\tpopularArticles.cutToLimitOrder();\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tif(Number(document.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].value) === popularArticles.getPages() ) {\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tsmoothScroll();\n}\n\nfunction onBackArrow() {\n\tif(popularArticles.page > 0) {\n\t\tpopularArticles.decreasePage();\n\t\tpopularArticles.decreaseStep();\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tdocument.querySelectorAll('#small-pag-btn')[popularArticles.indexOfActivePage].classList.add('isActivePage');\n\t\tinitWeather();\n\t\t} \n\tif(popularArticles.page === 0 || popularArticles.firstNews === 0 ) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t}\n\tif(popularArticles.firstNews < 0) {\n\t\tpopularArticles.firstNews = 0;\n\t}\n\tsmoothScroll();\n}\n\nfunction normalizedPopularNews(articles) {\nconst outputArticles = [];\narticles.map(({ title, url, published_date, abstract, section, id, media }) => { \n\n\t\n\tconst img = media.length > 0 \n\t? media[0]['media-metadata'][2].url\n\t: 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n\n\tconst article = {\n\theadline: title,\n\tweb_url: url, \n\t  pub_date: published_date,\n\t  lead_paragraph: abstract,\n\t  news_desk: section, \n\t  bigSquareImg: img,\n\t  id: id\n\t};\n\toutputArticles.push(article);\n} ); \ncreateBtnsForSmallPaginator();\nreturn outputArticles;\n}\n\n\n\n\n\nfunction createMarkupBtnsForSmallPaginator() {\n\tlet markupBtns = '';\n\n\tfor ( let i = 1; i <= popularArticles.getPages(); i += 1) {\n\t\tmarkupBtns += `<li><button type=\"button\" class=\"buttons\" value=\"${i}\" id=\"small-pag-btn\">${i}</button><li>`;\n\t}\n\treturn markupBtns;\n\t\n}\n\nfunction createBtnsForSmallPaginator() {\n\tsmallPagBtns.innerHTML = createMarkupBtnsForSmallPaginator(); \n\t\n}\n\n\n\n\n"],"names":["$8nrFW","parcelRequire","$9b12918259623da8$var$URL","concat","$9b12918259623da8$var$smallPagBtns","document","getElementById","mediaQueryDesktop","mediaQueryTablet","mediaQueryMobile","$9b12918259623da8$var$popularArticles","body","firstNews","lastNews","perPage","page","indexOfActivePage","getPages","Math","ceil","this","length","initOrderNews","cutToLimitOrder","resetLimitOrder","increasePage","decreasePage","increaseStep","decreaseStep","addToBody","value","$parcel$interopDefault","sliceBody","slice","getIndexOfActivePage","$9b12918259623da8$var$normalizedPopularNews","articles","outputArticles","map","param","title","url","published_date","abstract","section","id","media","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","push","innerHTML","markupBtns","i","$9b12918259623da8$var$createMarkupBtnsForSmallPaginator","window","matchMedia","matches","$gpT04","default","then","response","allPopularArticles","results","$crlC9","headerRefs","list","replaceChildren","$7iFtI","querySelectorAll","classList","add","$fMavV","initWeather","nextArrow","addEventListener","backArrow","removeAttribute","setAttribute","Number","$l16qp","event","target"],"version":3,"file":"index.488eb16b.js.map"}