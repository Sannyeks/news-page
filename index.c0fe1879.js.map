{"mappings":"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","sources":["src/js/showCategories.js","src/js/api/fetchApi.js","src/js/markupCategoriesFilter.js"],"sourcesContent":["import { markupCategories, markupNameButton } from './markupCategoriesFilter.js';\nimport cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport {headerRefs} from \"./headerRefs\";\n\n\nconst categoriesList = document.querySelector('.buttons-list');\nconst categoriesBtn = document.querySelector('#btn-open-category');\nconst categoriesMenu = document.querySelector('.category__menu');\nconst arrowBtnCategories = document.querySelector('.arrow-icon');\n\nmarkupCategories(categoriesMenu);\nmarkupNameButton();\n\ncategoriesList.addEventListener('click', onSearchNewsBtn);\ncategoriesBtn.addEventListener('click', onToggleCategoriesMenu);\ncategoriesMenu.addEventListener('click', onSearchNewsMenu);\n\nfunction onToggleCategoriesMenu() {\n    const isMenuOpen = \n        categoriesBtn.getAttribute('aria-expanded') === 'true' || false;\n    categoriesBtn.setAttribute('aria-expanded', !isMenuOpen);\n    categoriesMenu.classList.toggle('is-open-categories');\n    if (categoriesMenu.classList.contains('is-open-categories')) {\n        arrowBtnCategories.classList.add('open-categories');\n    }\n    if (!categoriesMenu.classList.contains('is-open-categories')) {\n        arrowBtnCategories.classList.remove('open-categories');\n        categoriesBtn.blur();\n    }\n};\n\nwindow.onclick = event => {\n    if (!event.target.matches('.category__btn')) {\n    if (!event.target.matches('.btn-item')) {\n      if (categoriesMenu.classList.contains('is-open-categories')) {\n        categoriesMenu.classList.remove('is-open-categories');\n      }\n    }\n  }\n  if (!event.target.matches('.category__btn')) {\n    \n    if (arrowBtnCategories.classList.contains('open-categories')) {\n      arrowBtnCategories.classList.remove('open-categories');\n    }\n  }\n};\n\nfunction onSearchNewsBtn(event) {\n  headerRefs.paginator.innerHTML = '';\n  const currentButtonCategory = event.target.dataset.btn;\n  // console.log(currentButtonCategory);\n  getNewsByFilter(currentButtonCategory).then(res => {\n\tconst ulEl = document.querySelector('.popular-articles__list');\n    ulEl.replaceChildren(cardMarkup(res));\n    initWeather()\n})\n  // cardMarkup(currentButtonCategory);\n};\n\nfunction onSearchNewsMenu(event) {\n  const currentButtonCategory = event.target.dataset.btn;\n  const currentButtonValue = event.target.innerText;\n  // console.log(currentButtonCategory);\n  \n  getNewsByFilter(currentButtonCategory).then(res => {\n    const ulEl = document.querySelector('.popular-articles__list');\n    ulEl.replaceChildren(cardMarkup(res));\n    initWeather();\n    \n \n  });\n  // cardMarkup(currentButtonCategory);\n \n\n  markupNameButton(decodeURIComponent(currentButtonValue));\n  categoriesMenu.classList.remove('is-open-categories');\n\n  arrowBtnCategories.classList.add('open-categories');\n  categoriesBtn.focus();\n}\n// =====================================\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\n\nasync function getNewsByFilter(currentButtonCategory) {\n  const category = currentButtonCategory;\n  // console.log(category);\n\tconst response = await fetch(`https://api.nytimes.com/svc/news/v3/content/nyt/${category}.json?api-key=${apiKey}`);\n\tconst data = await response.json();\n\tconst { results } = data;\n\tconst resultArticles = [];\n\n\t  results.map(({ title, url, published_date, abstract, section, id, multimedia\n    }) => {\n      const image = (multimedia)\n      ? multimedia[3].url\n      : 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n  \n\n\t\tconst article = {\n\t\theadline: title,\n\t\tweb_url: url, \n      pub_date: published_date,\n      lead_paragraph: abstract,\n      news_desk: section, \n      bigSquareImg: image,\n      // smallMobileImg: image,\n      // smallSquareImg: image,\n      // bigSquareImg: image,\n      id: id\n\t\t}\n\n\t\tresultArticles.push(article);\n  } ); \n  resultArticles.length = upadatePerPage();\n\t// console.log(resultArticles);\n\treturn resultArticles;\n}\n\n// getNewsByFilter().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tulEl.replaceChildren(cardMarkup(res));\n// })\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t  return 8;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t  return 7;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t  return 4;\n\t} \n\n}","import axios from \"axios\";\r\nconst KEY = 'api-key=3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\r\nconst BASE_URL = 'https://api.nytimes.com/svc';\r\nconst MOST_POPULAR_NEWS = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${KEY}`;\r\n\r\n// Пошук популярних новин\r\nasync function getPopularArticle() {\r\n    const articleFetch = await fetch(MOST_POPULAR_NEWS);\r\n    const articles = await articleFetch.json();\r\n    let { results } = articles;\r\n    // console.log(results);\r\n    return results;\r\n}\r\n\r\n// Пошук категорій\r\nasync function getCategoryList() {\r\n    const categoryList = await fetch(\r\n        `${BASE_URL}/news/v3/content/section-list.json?${KEY}`\r\n    );\r\n    const categories = await categoryList.json();\r\n    let { results } = categories;\r\n\r\n    // console.log(results);\r\n\r\n    return results;\r\n}\r\n\r\n\r\n// Пошук за запитом по Search\r\nlet sumPage;\r\nasync function getSearchArticle(value, page) {\r\n    let dateForUrl = '';\r\n    try {\r\n        let date = JSON.parse(localStorage.getItem('date'))\r\n            .replace('/', '')\r\n            .replace('/', '');\r\n        // console.log(date);\r\n        dateForUrl = `&begin_date=${date}&end_date=${date}`;\r\n    } catch (error) {\r\n        // dateForUrl = '';\r\n    }\r\n    const articleFetch = await fetch(\r\n        `${BASE_URL}/search/v2/articlesearch.json?q=${value}&${KEY}&page=${page}${dateForUrl}`\r\n    );\r\n    const articles = await articleFetch.json();\r\n\r\n    let { response, errors } = articles;\r\n\r\n    if (errors) {\r\n        alert(JSON.parse(errors));\r\n        return;\r\n    }\r\n\r\n    if (response.meta.hits > 1000) {\r\n        sumPage = 1000;\r\n    } else {\r\n        sumPage = response.meta.hits;\r\n    }\r\n    // console.log(response.meta.hits);\r\n    let { docs } = response;\r\n    // console.log(docs);\r\n\r\n    return docs;\r\n}\r\n\r\nasync function getArticleByCategory(value) {\r\n    try {\r\n        let newValue = encodeURIComponent(value);\r\n\r\n        const articleFetch = await fetch(\r\n            `${BASE_URL}/news/v3/content/all/${newValue}.json?${KEY}&limit=30`\r\n        );\r\n\r\n        const articles = await articleFetch.json();\r\n\r\n        let { results } = articles;\r\n\r\n        console.log(results);\r\n        return results;\r\n    } catch (error) {\r\n        console.log('Ooops we have a problem');\r\n    }\r\n}\r\n\r\n\r\n\r\nexport {\r\n    getCategoryList,\r\n    getPopularArticle,\r\n    getArticleByCategory,\r\n    getSearchArticle,\r\n    sumPage,\r\n};\r\n\r\n// !!!Виклики функцій працюють\r\n// getPopularArticle();\r\n// getCategoryList();\r\n// для getArticleByCategory вввести значення з масиву getCategoryList() \"name\";\r\n// getArticleByCategory(\"books\");\r\n// getSearchArticle(\"chatgpt\", 1);\r\n","import { getCategoryList } from './api/fetchApi.js';\n\n\nconst categoriesList = document.querySelector('.buttons-list');\nconst categoriesBtn = document.querySelector('#btn-open-category');\nconst categoriesMenu = document.querySelector('.category__menu');\n\n export async function markupCategories(categoriesMenu) {\n    try {\n        const getCategories = await getCategoryList();\n        const categories = getCategories;\n        if (window.matchMedia('(max-width: 767px)').matches) {\n            categoriesList.innerHTML = '';\n            categoriesMenu.innerHTML = renderingOthers(categories);\n        }\n        if (window.matchMedia('(min-width: 768px) and (max-width: 1279px)').matches) {\n            categoriesList.innerHTML = '';\n            const categoriesArrs = divideArrNews(categories, 4);\n            categoriesMenu.innerHTML = renderingOthers(categoriesArrs[1]);\n            categoriesList.insertAdjacentHTML('beforeend',\n                renderingButtons(categoriesArrs[0]));\n        }\n        if (window.matchMedia('(min-width: 1280px)').matches) {\n            categoriesList.innerHTML = '';\n            const categoriesArrs = divideArrNews(categories, 6);\n            categoriesMenu.innerHTML = renderingOthers(categoriesArrs[1]);\n            categoriesList.insertAdjacentHTML('beforeend',\n                renderingButtons(categoriesArrs[0]));\n        }\n    } catch {\n        console.log(error);\n    }\n};\n\n export function markupNameButton(currentButton) {\n    if (categoriesMenu.classList.contains('is-open-categories')) {\n        categoriesMenu.classList.remove('is-open-categories');\n        if (currentButton.length < 18) {\n            categoriesBtn.firstChild.textContent = currentButton;\n        }\n        else {\n            const newNameButton = `${currentButton.slice(0, 15)}...`\n            categoriesBtn.firstChild.textContent = newNameButton;\n        }\n    } else {\n        if (window.matchMedia('(max-width: 767px)').matches) {\n            categoriesBtn.firstChild.textContent = 'Categories';\n        }\n        if (window.matchMedia('(min-width: 768px)').matches) {\n            categoriesBtn.firstChild.textContent = 'Others';\n        }\n    }\n};\n\nfunction renderingOthers(categories) {\n    return categories.map(({ section, display_name }) => {\n        return `<li class='category__item'>\n        <button class=\"btn-item\"\n            data-btn=${encoded(section)}>${display_name}</button>\n            </li>`;\n    }).join(' ');\n};\n\nfunction renderingButtons(categories) {\n    return categories.map(({ section, display_name }) => {\n        return `<li class='buttons-list__item'>\n        <button class='buttons-list__button' data-btn=${encoded(section)}>\n        ${display_name}</button>\n        </li>`;\n    }).join(' ');\n}\n\nfunction divideArrNews(categories, count) {\n  const categoriesArrs = [];\n  categoriesArrs.push(categories.slice(0, count));\n  categoriesArrs.push(categories.slice(count));\n  return categoriesArrs;\n};\n\nfunction encoded(string) {\n    return encodeURIComponent(string);\n};\n"],"names":["$bpxeT","parcelRequire","$20fba14b5e95ec63$var$KEY","$20fba14b5e95ec63$var$BASE_URL","concat","$20fba14b5e95ec63$export$97875efe23d1d9ba","$20fba14b5e95ec63$var$_getCategoryList","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","categoryList","categories","results","fetch","_ctx","sent","json","$41015498e6327598$var$categoriesList","document","querySelector","$41015498e6327598$var$categoriesBtn","$41015498e6327598$var$categoriesMenu","$41015498e6327598$var$_markupCategories","categoriesMenu1","getCategories","categoriesArrs","categoriesArrs1","window","matchMedia","matches","innerHTML","$41015498e6327598$var$renderingOthers","$41015498e6327598$var$divideArrNews","insertAdjacentHTML","$41015498e6327598$var$renderingButtons","console","log","error","$41015498e6327598$export$dd65ee2fe100f391","currentButton","classList","contains","remove","length","firstChild","textContent","newNameButton","slice","map","param","section","display_name","$41015498e6327598$var$encoded","join","count","push","string","encodeURIComponent","$15b062970a4efaa7$var$categoriesList","$15b062970a4efaa7$var$categoriesBtn","$15b062970a4efaa7$var$categoriesMenu","$15b062970a4efaa7$var$arrowBtnCategories","addEventListener","event","$crlC9","headerRefs","paginator","$15b062970a4efaa7$var$getNewsByFilter","target","dataset","btn","then","res","replaceChildren","$7iFtI","default","$fMavV","initWeather","isMenuOpen","getAttribute","setAttribute","toggle","add","blur","currentButtonCategory","currentButtonValue","innerText","decodeURIComponent","focus","onclick","$15b062970a4efaa7$var$apiKey","$15b062970a4efaa7$var$_getNewsByFilter","category","response","data","resultArticles","title","url","published_date","abstract","id","multimedia","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","$15b062970a4efaa7$var$upadatePerPage","mediaQueryDesktop","mediaQueryTablet","mediaQueryMobile"],"version":3,"file":"index.c0fe1879.js.map"}