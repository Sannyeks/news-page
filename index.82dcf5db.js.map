{"mappings":"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","sources":["src/js/api/fetchApi.js","src/js/markupCategoriesFilter.js","src/js/showCategories.js"],"sourcesContent":["import axios from \"axios\";\r\nconst KEY = 'api-key=3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\r\nconst BASE_URL = 'https://api.nytimes.com/svc';\r\nconst MOST_POPULAR_NEWS = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${KEY}`;\r\n\r\n// Пошук популярних новин\r\nasync function getPopularArticle() {\r\n    const articleFetch = await fetch(MOST_POPULAR_NEWS);\r\n    const articles = await articleFetch.json();\r\n    let { results } = articles;\r\n    // console.log(results);\r\n    return results;\r\n}\r\n\r\n// Пошук категорій\r\nasync function getCategoryList() {\r\n    const categoryList = await fetch(\r\n        `${BASE_URL}/news/v3/content/section-list.json?${KEY}`\r\n    );\r\n    const categories = await categoryList.json();\r\n    let { results } = categories;\r\n\r\n    // console.log(results);\r\n\r\n    return results;\r\n}\r\n\r\n\r\n// Пошук за запитом по Search\r\nlet sumPage;\r\nasync function getSearchArticle(value, page) {\r\n    let dateForUrl = '';\r\n    try {\r\n        let date = JSON.parse(localStorage.getItem('date'))\r\n            .replace('/', '')\r\n            .replace('/', '');\r\n        // console.log(date);\r\n        dateForUrl = `&begin_date=${date}&end_date=${date}`;\r\n    } catch (error) {\r\n        // dateForUrl = '';\r\n    }\r\n    const articleFetch = await fetch(\r\n        `${BASE_URL}/search/v2/articlesearch.json?q=${value}&${KEY}&page=${page}${dateForUrl}`\r\n    );\r\n    const articles = await articleFetch.json();\r\n\r\n    let { response, errors } = articles;\r\n\r\n    if (errors) {\r\n        alert(JSON.parse(errors));\r\n        return;\r\n    }\r\n\r\n    if (response.meta.hits > 1000) {\r\n        sumPage = 1000;\r\n    } else {\r\n        sumPage = response.meta.hits;\r\n    }\r\n    // console.log(response.meta.hits);\r\n    let { docs } = response;\r\n    // console.log(docs);\r\n\r\n    return docs;\r\n}\r\n\r\nasync function getArticleByCategory(value) {\r\n    try {\r\n        let newValue = encodeURIComponent(value);\r\n\r\n        const articleFetch = await fetch(\r\n            `${BASE_URL}/news/v3/content/all/${newValue}.json?${KEY}&limit=30`\r\n        );\r\n\r\n        const articles = await articleFetch.json();\r\n\r\n        let { results } = articles;\r\n\r\n        console.log(results);\r\n        return results;\r\n    } catch (error) {\r\n        console.log('Ooops we have a problem');\r\n    }\r\n}\r\n\r\n\r\n\r\nexport {\r\n    getCategoryList,\r\n    getPopularArticle,\r\n    getArticleByCategory,\r\n    getSearchArticle,\r\n    sumPage,\r\n};\r\n\r\n// !!!Виклики функцій працюють\r\n// getPopularArticle();\r\n// getCategoryList();\r\n// для getArticleByCategory вввести значення з масиву getCategoryList() \"name\";\r\n// getArticleByCategory(\"books\");\r\n// getSearchArticle(\"chatgpt\", 1);\r\n","import { getCategoryList } from './api/fetchApi.js';\n\n\nconst categoriesList = document.querySelector('.buttons-list');\nconst categoriesBtn = document.querySelector('#btn-open-category');\nconst categoriesMenu = document.querySelector('.category__menu');\n\n export async function markupCategories(categoriesMenu) {\n    try {\n        const getCategories = await getCategoryList();\n        const categories = getCategories;\n        if (window.matchMedia('(max-width: 767px)').matches) {\n            categoriesList.innerHTML = '';\n            categoriesMenu.innerHTML = renderingOthers(categories);\n        }\n        if (window.matchMedia('(min-width: 768px) and (max-width: 1279px)').matches) {\n            categoriesList.innerHTML = '';\n            const categoriesArrs = divideArrNews(categories, 4);\n            categoriesMenu.innerHTML = renderingOthers(categoriesArrs[1]);\n            categoriesList.insertAdjacentHTML('beforeend',\n                renderingButtons(categoriesArrs[0]));\n        }\n        if (window.matchMedia('(min-width: 1280px)').matches) {\n            categoriesList.innerHTML = '';\n            const categoriesArrs = divideArrNews(categories, 6);\n            categoriesMenu.innerHTML = renderingOthers(categoriesArrs[1]);\n            categoriesList.insertAdjacentHTML('beforeend',\n                renderingButtons(categoriesArrs[0]));\n        }\n    } catch {\n        console.log(error);\n    }\n};\n\n export function markupNameButton(currentButton) {\n    if (categoriesMenu.classList.contains('is-open-categories')) {\n        categoriesMenu.classList.remove('is-open-categories');\n        if (currentButton.length < 18) {\n            categoriesBtn.firstChild.textContent = currentButton;\n        }\n        else {\n            const newNameButton = `${currentButton.slice(0, 15)}...`\n            categoriesBtn.firstChild.textContent = newNameButton;\n        }\n    } else {\n        if (window.matchMedia('(max-width: 767px)').matches) {\n            categoriesBtn.firstChild.textContent = 'Categories';\n        }\n        if (window.matchMedia('(min-width: 768px)').matches) {\n            categoriesBtn.firstChild.textContent = 'Others';\n        }\n    }\n};\n\nfunction renderingOthers(categories) {\n    return categories.map(({ section, display_name }) => {\n        return `<li class='category__item'>\n        <button class=\"btn-item\"\n            data-btn=${encoded(section)}>${display_name}</button>\n            </li>`;\n    }).join(' ');\n};\n\nfunction renderingButtons(categories) {\n    return categories.map(({ section, display_name }) => {\n        return `<li class='buttons-list__item'>\n        <button class='buttons-list__button' data-btn=${encoded(section)}>\n        ${display_name}</button>\n        </li>`;\n    }).join(' ');\n}\n\nfunction divideArrNews(categories, count) {\n  const categoriesArrs = [];\n  categoriesArrs.push(categories.slice(0, count));\n  categoriesArrs.push(categories.slice(count));\n  return categoriesArrs;\n};\n\nfunction encoded(string) {\n    return encodeURIComponent(string);\n};\n","import { markupCategories, markupNameButton } from './markupCategoriesFilter.js';\nimport cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport {headerRefs} from \"./headerRefs\";\n\n\nconst categoriesList = document.querySelector('.buttons-list');\nconst categoriesBtn = document.querySelector('#btn-open-category');\nconst categoriesMenu = document.querySelector('.category__menu');\nconst arrowBtnCategories = document.querySelector('.arrow-icon');\n\nmarkupCategories(categoriesMenu);\nmarkupNameButton();\n\ncategoriesList.addEventListener('click', onSearchNewsBtn);\ncategoriesBtn.addEventListener('click', onToggleCategoriesMenu);\ncategoriesMenu.addEventListener('click', onSearchNewsMenu);\n\nfunction onToggleCategoriesMenu() {\n    const isMenuOpen = \n        categoriesBtn.getAttribute('aria-expanded') === 'true' || false;\n    categoriesBtn.setAttribute('aria-expanded', !isMenuOpen);\n    categoriesMenu.classList.toggle('is-open-categories');\n    if (categoriesMenu.classList.contains('is-open-categories')) {\n        arrowBtnCategories.classList.add('open-categories');\n    }\n    if (!categoriesMenu.classList.contains('is-open-categories')) {\n        arrowBtnCategories.classList.remove('open-categories');\n        categoriesBtn.blur();\n    }\n};\n\nwindow.onclick = event => {\n    if (!event.target.matches('.category__btn')) {\n    if (!event.target.matches('.btn-item')) {\n      if (categoriesMenu.classList.contains('is-open-categories')) {\n        categoriesMenu.classList.remove('is-open-categories');\n      }\n    }\n  }\n  if (!event.target.matches('.category__btn')) {\n    \n    if (arrowBtnCategories.classList.contains('open-categories')) {\n      arrowBtnCategories.classList.remove('open-categories');\n    }\n  }\n};\n\nfunction onSearchNewsBtn(event) {\n  headerRefs.paginator.innerHTML = '';\n  const currentButtonCategory = event.target.dataset.btn;\n  // console.log(currentButtonCategory);\n  getNewsByFilter(currentButtonCategory).then(res => {\n\tconst ulEl = document.querySelector('.popular-articles__list');\n    ulEl.replaceChildren(cardMarkup(res));\n    initWeather()\n})\n  // cardMarkup(currentButtonCategory);\n};\n\nfunction onSearchNewsMenu(event) {\n  const currentButtonCategory = event.target.dataset.btn;\n  const currentButtonValue = event.target.innerText;\n  // console.log(currentButtonCategory);\n  \n  getNewsByFilter(currentButtonCategory).then(res => {\n    const ulEl = document.querySelector('.popular-articles__list');\n    ulEl.replaceChildren(cardMarkup(res));\n    initWeather();\n    \n \n  });\n  // cardMarkup(currentButtonCategory);\n \n\n  markupNameButton(decodeURIComponent(currentButtonValue));\n  categoriesMenu.classList.remove('is-open-categories');\n\n  arrowBtnCategories.classList.add('open-categories');\n  categoriesBtn.focus();\n}\n// =====================================\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\n\nasync function getNewsByFilter(currentButtonCategory) {\n  const category = currentButtonCategory;\n  // console.log(category);\n\tconst response = await fetch(`https://api.nytimes.com/svc/news/v3/content/nyt/${category}.json?api-key=${apiKey}`);\n\tconst data = await response.json();\n\tconst { results } = data;\n\tconst resultArticles = [];\n\n\t  results.map(({ title, url, published_date, abstract, section, id, multimedia\n    }) => {\n      const image = (multimedia)\n      ? multimedia[3].url\n      : 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n  \n\n\t\tconst article = {\n\t\theadline: title,\n\t\tweb_url: url, \n      pub_date: published_date,\n      lead_paragraph: abstract,\n      news_desk: section, \n      bigSquareImg: image,\n      // smallMobileImg: image,\n      // smallSquareImg: image,\n      // bigSquareImg: image,\n      id: id\n\t\t}\n\n\t\tresultArticles.push(article);\n  } ); \n  resultArticles.length = upadatePerPage();\n\t// console.log(resultArticles);\n\treturn resultArticles;\n}\n\n// getNewsByFilter().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tulEl.replaceChildren(cardMarkup(res));\n// })\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t  return 8;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t  return 7;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t  return 4;\n\t} \n\n}"],"names":["async","$79e81cc842297628$export$97875efe23d1d9ba","categoryList","fetch","categories","json","results","$218221d0028bb1de$var$categoriesList","document","querySelector","$218221d0028bb1de$var$categoriesBtn","$218221d0028bb1de$var$categoriesMenu","$218221d0028bb1de$export$dd65ee2fe100f391","currentButton","classList","contains","remove","length","firstChild","textContent","newNameButton","slice","window","matchMedia","matches","$218221d0028bb1de$var$renderingOthers","map","section","display_name","$218221d0028bb1de$var$encoded","join","$218221d0028bb1de$var$renderingButtons","$218221d0028bb1de$var$divideArrNews","count","categoriesArrs","push","string","encodeURIComponent","$623dea5653ffed06$var$categoriesList","$623dea5653ffed06$var$categoriesBtn","$623dea5653ffed06$var$categoriesMenu","$623dea5653ffed06$var$arrowBtnCategories","categoriesMenu1","innerHTML","insertAdjacentHTML","console","log","error","addEventListener","event","$6W1HG","headerRefs","paginator","$623dea5653ffed06$var$getNewsByFilter","target","dataset","btn","then","res","replaceChildren","$eVqJU","default","$bkgkh","initWeather","isMenuOpen","getAttribute","setAttribute","toggle","add","blur","currentButtonCategory","currentButtonValue","innerText","decodeURIComponent","focus","onclick","category","response","data","resultArticles","title","url","published_date","abstract","id","multimedia","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","mediaQueryDesktop","mediaQueryTablet","mediaQueryMobile","$623dea5653ffed06$var$upadatePerPage"],"version":3,"file":"index.82dcf5db.js.map"}